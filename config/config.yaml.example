# config/config.yaml.example
# 本ファイルはサンプルです。実運用ではコピーして編集し、
# 既定パスは ~/.config/openai-responses-mcp/config.yaml です。
# そこに配置するか、CLI の --config で明示してください。
#
# 優先順位: ENV > YAML > TS defaults。配列は置換し、オブジェクトは深いマージ。

openai:
  # 認証に使う環境変数名。通常は OPENAI_API_KEY を使用し、YAML に鍵は書かない。
  api_key_env: OPENAI_API_KEY
  # OpenAI API のベース URL
  base_url: https://api.openai.com/v1

request:
  # タイムアウト（ミリ秒）
  timeout_ms: 300000
  # 自動リトライ回数（429/5xx）
  max_retries: 3

# マルチプロファイル設定
# 用途に応じて3つのツールプロファイルを提供
model_profiles:
  # 必須・基準プロファイル。未定義の場合は起動後のtools/callでエラーとなる
  answer:
    model: gpt-5.2
    reasoning_effort: medium
    verbosity: medium

  # オプション・詳細分析用（未設定時はanswerで代替）
  answer_detailed:
    model: gpt-5.1-codex
    reasoning_effort: high
    verbosity: high

  # オプション・高速回答用（未設定時はanswerで代替）
  answer_quick:
    model: gpt-5.2-chat-latest
    reasoning_effort: low
    verbosity: low

# 最小設定例：answerのみ設定して全ツールを同じ設定で使用
# model_profiles:
#   answer:
#     model: gpt-5.2
#     reasoning_effort: medium
#     verbosity: medium
# # answer_detailed, answer_quick は省略 → answer の設定で動作

policy:
  # 出典の最大件数（1〜10 程度を推奨）
  max_citations: 3
  # System Policy の外部ファイルを使う場合は以下を有効化
  # system:
  #   source: file
  #   path: ~/.config/openai-responses-mcp/policy.md
  #   merge: append   # replace | prepend | append

search:
  defaults:
    # 記事の鮮度目安（日数）
    recency_days: 60
    # 取得件数ヒント（実際の使用はモデル判断）
    max_results: 5
    # 優先したいドメイン（空配列で制限なし）
    domains: []

server:
  # デバッグ（詳細ログ）: CLI/ENV/YAML は同義（優先度: CLI > ENV > YAML）
  # - CLI: --debug / --debug <path>
  # - ENV: DEBUG=1|true|<path>
  # - YAML: server.debug: true / server.debug_file: <path>
  debug: false
  # debug が true のとき、パス指定で stderr をファイルへ同時出力
  debug_file: null
  # 起動時にstderrへ実効設定の要約を表示
  show_config_on_start: false
